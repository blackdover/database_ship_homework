# å¯†ç é‡ç½®æŒ‡å—

## ğŸ” å¿˜è®°å¯†ç è§£å†³æ–¹æ¡ˆ

å¦‚æœæ‚¨å¿˜è®°äº†ç³»ç»Ÿç™»å½•å¯†ç ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•é‡ç½®ï¼š

---

## æ–¹æ³•ä¸€ï¼šä½¿ç”¨Djangoç®¡ç†å‘½ä»¤ï¼ˆæ¨èï¼‰

### 1. é‡ç½®ç°æœ‰ç”¨æˆ·å¯†ç 

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
cd container_management
python manage.py changepassword <ç”¨æˆ·å>
```

**ç¤ºä¾‹**ï¼š
```bash
python manage.py changepassword admin
```

ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥æ–°å¯†ç ï¼ˆè¾“å…¥ä¸¤æ¬¡ç¡®è®¤ï¼‰ã€‚

---

### 2. åˆ›å»ºæ–°çš„è¶…çº§ç”¨æˆ·

å¦‚æœå¿˜è®°äº†æ‰€æœ‰è´¦å·ï¼Œå¯ä»¥åˆ›å»ºæ–°çš„è¶…çº§ç”¨æˆ·ï¼š

```bash
cd container_management
python manage.py createsuperuser
```

æŒ‰æç¤ºè¾“å…¥ï¼š
- ç”¨æˆ·å
- é‚®ç®±ï¼ˆå¯é€‰ï¼‰
- å¯†ç ï¼ˆè¾“å…¥ä¸¤æ¬¡ï¼‰

---

## æ–¹æ³•äºŒï¼šåœ¨Django Shellä¸­é‡ç½®

### 1. è¿›å…¥Django Shell

```bash
cd container_management
python manage.py shell
```

### 2. é‡ç½®å¯†ç 

åœ¨Shellä¸­æ‰§è¡Œï¼š

```python
from django.contrib.auth.models import User

# æŸ¥æ‰¾ç”¨æˆ·
user = User.objects.get(username='admin')

# è®¾ç½®æ–°å¯†ç 
user.set_password('æ–°å¯†ç ')
user.save()

# é€€å‡ºShell
exit()
```

**ç¤ºä¾‹**ï¼š
```python
from django.contrib.auth.models import User
user = User.objects.get(username='admin')
user.set_password('newpassword123')
user.save()
print('å¯†ç å·²é‡ç½®ï¼')
exit()
```

---

## æ–¹æ³•ä¸‰ï¼šç›´æ¥åœ¨æ•°æ®åº“ä¸­ä¿®æ”¹ï¼ˆé«˜çº§ï¼‰

âš ï¸ **æ³¨æ„**ï¼šæ­¤æ–¹æ³•éœ€è¦ç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚

### 1. ç™»å½•MySQL

```bash
mysql -u root -p
```

### 2. é€‰æ‹©æ•°æ®åº“

```sql
USE box_management;
```

### 3. æŸ¥çœ‹Djangoç”¨æˆ·è¡¨

Djangoé»˜è®¤ä½¿ç”¨ `auth_user` è¡¨å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼š

```sql
SELECT id, username, email, is_superuser FROM auth_user;
```

### 4. ç”Ÿæˆå¯†ç å“ˆå¸Œï¼ˆPythonï¼‰

åœ¨Pythonä¸­ç”Ÿæˆå¯†ç å“ˆå¸Œï¼š

```python
from django.contrib.auth.hashers import make_password
password_hash = make_password('æ–°å¯†ç ')
print(password_hash)
```

### 5. æ›´æ–°æ•°æ®åº“

```sql
UPDATE auth_user 
SET password = 'ç”Ÿæˆçš„å¯†ç å“ˆå¸Œå€¼'
WHERE username = 'admin';
```

---

## æ–¹æ³•å››ï¼šä½¿ç”¨å¯†ç é‡ç½®è„šæœ¬

### åˆ›å»ºé‡ç½®è„šæœ¬

åˆ›å»ºä¸€ä¸ªPythonè„šæœ¬ `reset_password.py`ï¼š

```python
#!/usr/bin/env python
import os
import sys
import django

# è®¾ç½®Djangoç¯å¢ƒ
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'container_management.settings')
django.setup()

from django.contrib.auth.models import User

def reset_password(username, new_password):
    try:
        user = User.objects.get(username=username)
        user.set_password(new_password)
        user.save()
        print(f'âœ… ç”¨æˆ· {username} çš„å¯†ç å·²æˆåŠŸé‡ç½®ï¼')
        return True
    except User.DoesNotExist:
        print(f'âŒ ç”¨æˆ· {username} ä¸å­˜åœ¨ï¼')
        return False
    except Exception as e:
        print(f'âŒ é‡ç½®å¯†ç æ—¶å‡ºé”™ï¼š{str(e)}')
        return False

if __name__ == '__main__':
    if len(sys.argv) != 3:
        print('ç”¨æ³•: python reset_password.py <ç”¨æˆ·å> <æ–°å¯†ç >')
        sys.exit(1)
    
    username = sys.argv[1]
    new_password = sys.argv[2]
    reset_password(username, new_password)
```

### ä½¿ç”¨è„šæœ¬

```bash
cd container_management
python reset_password.py admin newpassword123
```

---

## æ–¹æ³•äº”ï¼šé‡ç½®æ•°æ®åº“ç”¨æˆ·å¯†ç ï¼ˆå¦‚æœä½¿ç”¨æ•°æ®åº“ç”¨æˆ·è¡¨ï¼‰

å¦‚æœæ‚¨çš„ç³»ç»Ÿä½¿ç”¨è‡ªå®šä¹‰çš„ `Users` è¡¨ï¼Œéœ€è¦åŒæ­¥æ›´æ–°ï¼š

### 1. é‡ç½®Djangoç”¨æˆ·å¯†ç ï¼ˆä½¿ç”¨ä¸Šè¿°æ–¹æ³•ï¼‰

### 2. æ›´æ–°æ•°æ®åº“Usersè¡¨

```sql
USE box_management;

-- æŸ¥çœ‹ç”¨æˆ·
SELECT User_ID, Username, Full_Name FROM Users;

-- æ›´æ–°å¯†ç ï¼ˆæ³¨æ„ï¼šè¿™é‡Œéœ€è¦å­˜å‚¨å“ˆå¸Œåçš„å¯†ç ï¼‰
-- å»ºè®®ä½¿ç”¨Djangoçš„å¯†ç ç³»ç»Ÿï¼Œä¸è¦ç›´æ¥ä¿®æ”¹æ•°æ®åº“
```

**é‡è¦**ï¼šå¦‚æœä½¿ç”¨è‡ªå®šä¹‰ç”¨æˆ·è¡¨ï¼Œå»ºè®®ï¼š
1. ä½¿ç”¨Djangoçš„ `User` æ¨¡å‹ä½œä¸ºè®¤è¯æº
2. åœ¨ `Users` è¡¨ä¸­åªå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä¸å­˜å‚¨å¯†ç 
3. é€šè¿‡å¤–é”®å…³è”Djangoçš„ `User` æ¨¡å‹

---

## ğŸ” æŸ¥æ‰¾ç”¨æˆ·å

å¦‚æœå¿˜è®°äº†ç”¨æˆ·åï¼Œå¯ä»¥ï¼š

### 1. æŸ¥çœ‹Djangoç”¨æˆ·åˆ—è¡¨

```bash
cd container_management
python manage.py shell
```

```python
from django.contrib.auth.models import User
users = User.objects.all()
for user in users:
    print(f'ç”¨æˆ·å: {user.username}, é‚®ç®±: {user.email}, è¶…çº§ç”¨æˆ·: {user.is_superuser}')
exit()
```

### 2. æŸ¥çœ‹æ•°æ®åº“ç”¨æˆ·è¡¨

```sql
USE box_management;
SELECT id, username, email, is_superuser, is_active FROM auth_user;
```

---

## ğŸ“ å¿«é€Ÿé‡ç½®å‘½ä»¤ï¼ˆä¸€é”®æ‰§è¡Œï¼‰

### Windows (PowerShell)

```powershell
cd container_management
python manage.py changepassword admin
```

### Linux/Mac

```bash
cd container_management
python manage.py changepassword admin
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**ï¼š
   - ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯ã€æ•°å­—ï¼‰
   - ä¸è¦ä½¿ç”¨ç®€å•å¯†ç å¦‚ `123456`ã€`admin` ç­‰
   - å®šæœŸæ›´æ¢å¯†ç 

2. **æ•°æ®åº“ç”¨æˆ·åŒæ­¥**ï¼š
   - å¦‚æœç³»ç»Ÿä½¿ç”¨è‡ªå®šä¹‰ `Users` è¡¨ï¼Œç¡®ä¿ä¸Django `User` è¡¨åŒæ­¥
   - å»ºè®®ä½¿ç”¨Djangoçš„è®¤è¯ç³»ç»Ÿä½œä¸ºä¸»è¦è®¤è¯æº

3. **å¤‡ä»½**ï¼š
   - ä¿®æ”¹æ•°æ®åº“å‰å»ºè®®å¤‡ä»½
   - é‡è¦æ“ä½œå‰å…ˆæµ‹è¯•

4. **æƒé™é—®é¢˜**ï¼š
   - ç¡®ä¿æœ‰æ•°æ®åº“è®¿é—®æƒé™
   - ç¡®ä¿æœ‰Djangoé¡¹ç›®ç›®å½•çš„å†™å…¥æƒé™

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: é‡ç½®å¯†ç åä»ç„¶æ— æ³•ç™»å½•ï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. ç”¨æˆ·åæ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
2. å¯†ç æ˜¯å¦æ­£ç¡®è¾“å…¥
3. ç”¨æˆ·æ˜¯å¦è¢«ç¦ç”¨ï¼ˆ`is_active=False`ï¼‰
4. æµè§ˆå™¨æ˜¯å¦æ¸…é™¤äº†ç¼“å­˜å’ŒCookie

### Q: å¿˜è®°äº†æ‰€æœ‰è´¦å·ä¿¡æ¯ï¼Ÿ

**A:** 
1. åˆ›å»ºæ–°çš„è¶…çº§ç”¨æˆ·ï¼š`python manage.py createsuperuser`
2. ä½¿ç”¨æ–°è´¦å·ç™»å½•
3. åœ¨ç®¡ç†ç•Œé¢ä¸­é‡ç½®å…¶ä»–ç”¨æˆ·å¯†ç 

### Q: æ•°æ®åº“ç”¨æˆ·å’ŒDjangoç”¨æˆ·ä¸åŒæ­¥ï¼Ÿ

**A:** 
1. æ£€æŸ¥ `Users` è¡¨å’Œ `auth_user` è¡¨çš„å…³è”
2. ç¡®ä¿ç™»å½•æ—¶ä½¿ç”¨Djangoçš„è®¤è¯ç³»ç»Ÿ
3. è€ƒè™‘ç»Ÿä¸€ä½¿ç”¨Djangoçš„ç”¨æˆ·ç³»ç»Ÿ

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥Djangoæ—¥å¿—æ–‡ä»¶
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥
3. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
4. è”ç³»ç³»ç»Ÿç®¡ç†å‘˜

---

**æœ€åæ›´æ–°**ï¼š2024å¹´

